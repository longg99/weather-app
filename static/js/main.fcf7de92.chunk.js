(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{369:function(e,t,a){},375:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(35),s=a.n(r),i=a(10),o=a(134),l=(a(139),a(48)),d=a.n(l),u="690a99e3fce9056aa266481b4f8e7946",h=a(386),j=a(378),b=a(179),m=a(1);function f(e){var t,a=e.handleSearchOnClick,c=e.handleCityChange,r=e.handleCountryChange,s=e.handleUnitOnChange,o=e.handleGetLocation,l=e.openWeather,d=e.showAlert,u=e.unit,f=e.useCity,x=Object(n.useState)(""),O=Object(i.a)(x,2),p=O[0],y=O[1],g=Object(n.useState)(""),w=Object(i.a)(g,2),v=w[0],N=w[1];return t=l||d?"Hide":"Show me the weather",Object(n.useEffect)((function(){var e=setTimeout((function(){c(p),r(v)}),850);return function(){clearTimeout(e)}}),[p,v,c,r]),Object(n.useEffect)((function(){f||y("")}),[f]),Object(m.jsxs)(h.a,{className:"container align-items-center \r justify-content-center p-2 col-xs-12 col-md-7 col-lg-5",onSubmit:function(e){e.preventDefault()},children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"d-flex justify-content-center mb-3",children:Object(m.jsx)(j.a,{"aria-expanded":"false","aria-controls":"weather alert",onClick:o,children:"Use my current location"})}),Object(m.jsx)("hr",{}),Object(m.jsxs)(h.a.Group,{className:"",children:[Object(m.jsx)("p",{className:"lead",children:"Search by City:"}),Object(m.jsx)(b.a,{controlId:"cityName",label:"City name:",className:"mb-3",children:Object(m.jsx)(h.a.Control,{type:"text",placeholder:"City...",value:p,onChange:function(e){return y(e.target.value)},autoFocus:!0})}),Object(m.jsx)(b.a,{controlId:"countryCode",label:"Country code (optional):",children:Object(m.jsx)(h.a.Control,{type:"text",placeholder:"Country code...",onChange:function(e){return N(e.target.value)}})})]}),Object(m.jsx)(h.a.Group,{children:Object(m.jsxs)("small",{className:"form-text text-muted",children:["Use country code for a more precise result. Refer to this"," ",Object(m.jsx)("a",{href:"https://www.iso.org/obp/ui/#home",target:"_blank",rel:"noreferrer",children:"link"}),"\xa0for the country codes."]})}),Object(m.jsx)("div",{className:"mt-2",children:Object(m.jsxs)(h.a.Group,{className:"d-flex justify-content-center",children:[Object(m.jsx)(h.a.Check,{name:"unitRadio",inline:!0,label:"Metric",type:"radio",onChange:s,value:"metric",checked:"metric"===u}),Object(m.jsx)(h.a.Check,{inline:!0,label:"Imperial",name:"unitRadio",onChange:s,type:"radio",value:"imperial",checked:"imperial"===u})]})})]}),Object(m.jsx)("div",{className:"d-flex justify-content-center",children:Object(m.jsx)(j.a,{className:"mt-1",onClick:a,"aria-expanded":"false","aria-controls":"weather alert",type:"submit",children:t})})]})}var x=a(384),O=a(387),p=(a(112),a(72)),y=a(22),g=a(60),w=a.n(g);function v(e){var t=e.data,a=e.unit;if(t&&0===Object.keys(t).length&&t.constructor===Object)return null;var n=t.weather[0],c=t.main,r=t.sys,s=t.name,i=t.wind,o=t.timezone,l=t.sys.sunrise+o,d=t.sys.sunset+o,u="https://openweathermap.org/img/wn/".concat(n.icon,".png"),h="metric"===a?"C":"F",j="metric"===a?"m/s (meter/sec)":"mph (miles per hour)",b=((new Date).getTime()+1e3*o)/1e3,f=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{className:"lead mb-0 text-center",style:{fontSize:"2vh"},children:["This is the current weather of ",s,", ",r.country," as of\xa0",Object(m.jsx)(w.a,{unix:!0,format:"LLL",tz:"UTC",children:b})," ","(local time):"]}),Object(m.jsxs)("div",{className:"d-flex flex-row align-items-center \r justify-content-center",children:[Object(m.jsx)("img",{src:u,alt:"weather condition"}),Object(m.jsxs)("p",{className:"h2 mb-0",children:[Math.round(c.temp),"\xb0",h," -"," ",f(n.description)]})]}),Object(m.jsxs)("p",{className:"text-center fs-6",children:[f(n.description)," condition is forecasted for now."]}),Object(m.jsxs)("div",{className:"card d-flex justify-content-center",children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsx)("span",{className:"lead",children:"Detailed weather report:"})}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{id:"weatherInfo",children:[Object(m.jsx)("span",{className:"text-muted",children:"High: "}),Object(m.jsxs)("span",{children:[Math.round(c.temp_max),"\xb0",h,"."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Low: "}),Object(m.jsxs)("span",{children:[Math.round(c.temp_min),"\xb0",h,"."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Feels like: "}),Object(m.jsxs)("span",{children:[Math.round(c.feels_like),"\xb0",h,"."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Humidity: "}),Object(m.jsxs)("span",{children:[Math.round(c.humidity),"%."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Atmospheric pressure: "}),Object(m.jsxs)("span",{children:[Math.round(c.pressure)," hPa."]}),Object(m.jsx)("hr",{}),Object(m.jsx)("span",{className:"text-muted",children:"Wind speed: "}),Object(m.jsxs)("span",{children:[i.speed," ",j,"."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Wind gust: "}),Object(m.jsxs)("span",{children:[i.gust," ",j,"."]}),Object(m.jsx)("hr",{}),Object(m.jsx)("span",{className:"text-muted",children:"Cloudiness: "}),Object(m.jsxs)("span",{children:[t.clouds.all,"%."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Visibility: "}),Object(m.jsxs)("span",{children:[t.visibility/1e3," km."]}),Object(m.jsx)("hr",{}),Object(m.jsx)("span",{className:"text-muted",children:"Sunrise: "}),Object(m.jsxs)("span",{children:[Object(m.jsx)(w.a,{unix:!0,format:"LT",tz:"UTC",children:l}),"."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Sunset: "}),Object(m.jsxs)("span",{children:[Object(m.jsx)(w.a,{unix:!0,format:"LT",tz:"UTC",children:d}),"."]})]})})]})]})}var N=a(41),C=a.n(N),S=a(379),k=a(380),M=a(203),P=a(195),T=a(196),E=a(59),q=a(86),Y=a(180),A=a.n(Y);function D(e){var t=e.data,a=e.unit;if(t&&0===Object.keys(t).length&&t.constructor===Object)return null;for(var n=t.list,c=t.city.name,r=t.city.country,s=t.city.timezone,i=((new Date).getTime()+1e3*s)/1e3,o="metric"===a?"C":"F",l=[],d=0;d<8;d++){var u=n[d],h=u.dt;C.a.unix(h+s).utc().format("YYYY-MM-DD")!==C.a.unix(i).utc().format("YYYY-MM-DD")&&C.a.unix(h+s).utc().format("YYYY-MM-DD")!==C.a.unix(i+86400).utc().format("YYYY-MM-DD")||l.push(u)}for(var j=[],b=0,f=l;b<f.length;b++){var x=f[b],O={temp:x.main.temp,feels_like:x.main.feels_like,time:C.a.unix(x.dt+s).utc().format("HH:mm")};j.push(O)}var p=A.a.groupBy(n,(function(e){return C.a.unix(e.dt+s).utc().format("ddd")})),y=Object.keys(p);y.shift();var g=[];return y.forEach((function(e,t){var a=Number.MIN_VALUE,n=Number.MAX_VALUE;p[e].forEach((function(e,t){a=Math.max(e.main.temp_max,a),n=Math.min(e.main.temp_min,n)})),a=Math.round(a),n=Math.round(n);var c={date:e,high:a,low:n};g.push(c)})),Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{className:"lead mb-0 text-center mb-3",style:{fontSize:"2vh"},children:["This is the forecast of ",c,", ",r," as of\xa0",Object(m.jsx)(w.a,{unix:!0,format:"LLL",tz:"UTC",children:i})," ","(local time):"]}),Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header lead",children:"3-hour forecast:"}),Object(m.jsxs)("div",{className:"card-body d-flex flex-column overflow-auto ",children:[Object(m.jsx)(S.a,{width:"98%",height:300,children:Object(m.jsxs)(k.a,{data:j,children:[Object(m.jsx)(M.a,{type:"monotone",dataKey:"temp",stroke:"#8884d8",name:"Temperature",des:!0}),Object(m.jsx)(P.a,{dataKey:"time"}),Object(m.jsx)(T.a,{width:40,label:function(){return Object(m.jsx)(E.a,{x:-35,y:30,dx:50,dy:150,offset:0,angle:-90,children:"Temperature"})}}),Object(m.jsx)(q.a,{})]})}),l.map((function(e){return Object(m.jsxs)("div",{className:"d-flex flex-row\r align-items-center",children:[Object(m.jsxs)("p",{className:"h5 mb-0",children:[Object(m.jsx)(w.a,{unix:!0,format:"HH:mm",tz:"UTC",children:e.dt+s}),":"]}),Object(m.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(e.weather[0].icon,".png"),alt:"weather condition"}),Object(m.jsxs)("p",{className:"fw-light fs-5 mb-0",children:[Math.round(e.main.temp),"\xb0",o," -"," ",(t=e.weather[0].description,t.charAt(0).toUpperCase()+t.slice(1)),". Feels like: ",Math.round(e.main.feels_like),"\xb0",o,"."]})]},e.dt_txt);var t}))]})]}),Object(m.jsxs)("div",{className:"card mt-3",children:[Object(m.jsx)("div",{className:"card-header lead",children:"Next 5 days forecast:"}),Object(m.jsx)("div",{className:"card-body d-flex flex-column overflow-auto ",children:Object(m.jsx)(S.a,{width:"98%",height:300,children:Object(m.jsxs)(k.a,{data:g,children:[Object(m.jsx)(M.a,{type:"monotone",dataKey:"high",stroke:"#8884d8",name:"Expected high temperature",des:!0}),Object(m.jsx)(P.a,{dataKey:"date"}),Object(m.jsx)(T.a,{width:40,label:function(){return Object(m.jsx)(E.a,{x:-35,y:30,dx:50,dy:150,offset:0,angle:-90,children:"Temperature"})}}),Object(m.jsx)(q.a,{})]})})}),g.map((function(e){return Object(m.jsxs)("div",{className:"d-flex flex-row\r align-items-center justify-content-center mx-2",children:[Object(m.jsxs)("p",{className:"h5 mb-0",children:[e.date,":\xa0"]}),Object(m.jsxs)("span",{className:"fw-light mb-0 fs-5",children:["High:\xa0",Math.round(e.high),"\xb0",o," - Low:\xa0",Math.round(e.low),"\xb0",o,"."]})]},e.date)}))]})]})}a(369);function L(e){var t=e.weather,a=e.unit,c=e.handleRefresh,r=e.handleChangeReport,s=e.forecast,o=Object(n.useState)(0),l=Object(i.a)(o,2),d=l[0],u=l[1],h=Object(n.useState)(),b=Object(i.a)(h,2),f=b[0],g=b[1],w=Object(n.useState)(),N=Object(i.a)(w,2),C=N[0],S=N[1];return Object(n.useEffect)((function(){0===d?(g("text-light text-center col"),S("text-dark text-center col")):(g("text-dark text-center col"),S("text-light text-center col"))}),[d]),t&&0===Object.keys(t).length&&t.constructor===Object?null:Object(m.jsxs)(x.a,{fluid:!0,className:"justify-content-center border bg-light",id:"weatherSection",children:[Object(m.jsxs)(p.a,{children:[Object(m.jsxs)("ul",{className:"row p-0",children:[Object(m.jsx)(O.a.Item,{as:p.b,className:f,to:"/currentweather",active:0===d,onClick:function(e){u(0),r("current")},children:"Current weather"}),Object(m.jsx)(O.a.Item,{as:p.b,className:C,to:"/fivedaysweather",active:0!==d,onClick:function(){u(1),r("five days")},children:"3-hour/5-day Forecast"})]}),Object(m.jsxs)(y.d,{children:[Object(m.jsx)(y.b,{path:"/currentweather",children:Object(m.jsx)(v,{data:t,unit:a,handleRefresh:c})}),Object(m.jsx)(y.b,{path:"/fivedaysweather",children:Object(m.jsx)(D,{data:s,unit:a,handleRefresh:c})})]}),Object(m.jsx)(y.a,{exact:!0,from:"/",to:"/currentweather"})]}),Object(m.jsx)("div",{className:"d-flex flex-row align-items-center \r justify-content-center",children:Object(m.jsx)(j.a,{style:{marginTop:10},className:"mb-2",onClick:c,children:"Refresh"})})]})}var R=a(385);function U(e){var t=e.showAlert,a=e.handleClose,n=e.error;return t?Object(m.jsxs)(R.a,{variant:"danger",children:[Object(m.jsx)(R.a.Heading,{children:"Error!"}),Object(m.jsx)("p",{children:n}),Object(m.jsx)("hr",{}),Object(m.jsx)("div",{className:"d-flex justify-content-end",children:Object(m.jsx)(j.a,{onClick:a,variant:"outline-success",children:"Close"})})]}):null}var W=a.p+"static/media/background-img.c5d3ef9c.jpg";var _=function(){var e,t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),h=l[0],j=l[1],b=Object(n.useState)({}),x=Object(i.a)(b,2),O=x[0],y=x[1],g=Object(n.useState)({}),w=Object(i.a)(g,2),v=w[0],N=w[1],C=Object(n.useState)((new Date).getHours()),S=Object(i.a)(C,2),k=S[0],M=S[1],P=Object(n.useState)(!1),T=Object(i.a)(P,2),E=T[0],q=T[1],Y=Object(n.useState)(!1),A=Object(i.a)(Y,2),D=A[0],R=A[1],_=Object(n.useState)(""),H=Object(i.a)(_,2),I=H[0],z=H[1],F=Object(n.useState)("metric"),G=Object(i.a)(F,2),K=G[0],V=G[1],B=Object(n.useState)(!1),J=Object(i.a)(B,2),X=J[0],Q=J[1],Z=Object(n.useState)("current"),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(!0),ne=Object(i.a)(ae,2),ce=ne[0],re=ne[1],se=Object(n.useState)([0,0]),ie=Object(i.a)(se,2),oe=ie[0],le=ie[1],de=Object(n.useState)(!1),ue=Object(i.a)(de,2),he=ue[0],je=ue[1],be=Object(n.useState)(!0),me=Object(i.a)(be,2),fe=me[0],xe=me[1];Object(n.useEffect)((function(){M((new Date).getHours())}),[k]),Object(n.useEffect)((function(){return fe&&(je(!1),(""!==c||X)&&("current"===ee?""===h?function(e,t){return d.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&units=").concat(t,"&appid=").concat(u))}(c,K).then((function(e){console.log("calling the current weather api with only city"),y(e.data),z("")})).catch((function(e){e.response?"404"===e.response.data.cod?z("Please enter a valid city/country!"):"429"===e.response.data.cod&&z("Sorry! The number of calls exceeded the server's allowance. Please try again in a few minutes..."):e.request&&z("Sorry! We are not receiving any request from the server. Please try again in a few minutes...")})):function(e,t,a){return d.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,",").concat(t,"&units=").concat(a,"&appid=").concat(u))}(c,h,K).then((function(e){console.log("calling the current weather api with city and country"),y(e.data),z("")})).catch((function(e){e.response?"404"===e.response.data.cod?z("Please enter a valid city/country!"):"429"===e.response.data.cod&&z("Sorry! The number of calls exceeded the server's allowance. Please try again in a few minutes..."):e.request?console.log(e.request):e.request&&z("Sorry! We are not receiving any request from the server. Please try again in a few minutes...")})):"five days"===ee&&(""===h?function(e,t){return d.a.get("https://api.openweathermap.org/data/2.5/forecast?q=".concat(e,"&units=").concat(t,"&appid=").concat(u))}(c,K).then((function(e){console.log("calling the FORECAST api with only city"),N(e.data),z("")})).catch((function(e){e.response?"404"===e.response.data.cod?z("Please enter a valid city/country!"):"429"===e.response.data.cod&&z("Sorry! The number of calls exceeded the server's allowance. Please try again in a few minutes..."):e.request&&z("Sorry! We are not receiving any request from the server. Please try again in a few minutes...")})):function(e,t,a){return d.a.get("https://api.openweathermap.org/data/2.5/forecast?q=".concat(e,",").concat(t,"&units=").concat(a,"&appid=").concat(u))}(c,h,K).then((function(e){console.log("calling the FORECAST weather api with city and country"),N(e.data),z("")})).catch((function(e){e.response?"404"===e.response.data.cod?z("Please enter a valid city/country!"):"429"===e.response.data.cod&&z("Sorry! The number of calls exceeded the server's allowance. Please try again in a few minutes..."):e.request?console.log(e.request):e.request&&z("Sorry! We are not receiving any request from the server. Please try again in a few minutes...")}))))),function(){return Q(!1)}}),[c,fe,h,K,X,ee]),Object(n.useEffect)((function(){return he&&(xe(!1),r(""),(0!==oe[0]&&0!==oe[1]||X)&&("current"===ee?function(e,t,a){return d.a.get("https://api.openweathermap.org/data/2.5/weather?lat=".concat(e,"&lon=").concat(t,"&units=").concat(a,"&appid=").concat(u))}(oe[0],oe[1],K).then((function(e){console.log("calling the current weather api with current location (lat:"+oe[0],",long:"+oe[1]),y(e.data),z(""),q(!0),R(!1)})).catch((function(e){e.response?"404"===e.response.data.cod?z("Please enter a valid city/country!"):"429"===e.response.data.cod&&z("Sorry! The number of calls exceeded the server's allowance. Please try again in a few minutes..."):e.request&&z("Sorry! We are not receiving any request from the server. Please try again in a few minutes...")})):"five days"===ee&&function(e,t,a){return d.a.get("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(e,"&lon=").concat(t,"&units=").concat(a,"&appid=").concat(u))}(oe[0],oe[1],K).then((function(e){console.log("calling the current FORECAST api with current location (lat:"+oe[0],",long:"+oe[1]),N(e.data),z(""),q(!0),R(!1)})).catch((function(e){e.response?"404"===e.response.data.cod?z("Please enter a valid city/country!"):"429"===e.response.data.cod&&z("Sorry! The number of calls exceeded the server's allowance. Please try again in a few minutes..."):e.request&&z("Sorry! We are not receiving any request from the server. Please try again in a few minutes...")})))),function(){Q(!1)}}),[he,oe,X,ee,K]),Object(n.useEffect)((function(){""!==I?(R(!0),q(!1)):(R(!1),""!==c&&q(!0))}),[I,c]),Object(n.useEffect)((function(){re(!E)}),[E]),d.a.interceptors.response.use((function(e){return e}),(function(e){if("401"!==e.response.status)return Promise.reject(e);z("Sorry! API key error. Please try again with another API key.")})),e=k<12&&k>4?"morning":k<18&&k>12?"afternoon":"evening";var Oe=function(e){le([e.coords.latitude,e.coords.longitude])};return console.log("city: ",c),console.log("use location: ",he),console.log("use city: ",fe),console.log("error: ",I),Object(m.jsx)(p.a,{basename:"/",children:Object(m.jsxs)("div",{className:"d-flex justify-content-center align-items-center\r flex-column h-100",style:{backgroundImage:"url(".concat(W,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center"},children:[Object(m.jsx)(o.a,{in:!E,unmountOnExit:!0,children:Object(m.jsxs)("p",{className:ce?"display-6 text-center w-100":"d-none",children:["Good ",e,"! Welcome to my weather app."]})}),Object(m.jsx)(f,{handleSearchOnClick:function(){""===I&&""!==c||he?(R(!1),q(!E)):(he||""!==c||z("You must enter a city first!"),R(!D))},handleCityChange:function(e){r(e),""!==c&&xe(!0)},handleCountryChange:function(e){j(e)},handleUnitOnChange:function(e){V(e.target.value)},handleGetLocation:function(){navigator.geolocation?(navigator.geolocation.getCurrentPosition(Oe),je(!0)):(z("Sorry! We couldn't get your geolocation. Either your browser does not support it or you did not give the permission. Please try again."),R(!0))},openWeather:E,showAlert:D,unit:K,show:ce,useCity:fe}),Object(m.jsx)(o.a,{in:D,unmountOnExit:!0,children:Object(m.jsx)("div",{id:"alert",children:Object(m.jsx)(U,{showAlert:D,handleClose:function(){R(!D)},error:I})})}),Object(m.jsx)(o.a,{in:E,unmountOnExit:!0,children:Object(m.jsx)("div",{id:"weather",className:"overflow-auto m-0 p-0",children:Object(m.jsx)(L,{weather:O,unit:K,forecast:v,handleRefresh:function(){Q(!0)},handleChangeReport:function(e){te(e)}})})})]})})};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(_,{})}),document.getElementById("root"))}},[[375,1,2]]]);
//# sourceMappingURL=main.fcf7de92.chunk.js.map