(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{376:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(35),s=a.n(r),i=a(11),o=a(137),l=a(390),d=(a(142),a(60)),j=a.n(d),h="690a99e3fce9056aa266481b4f8e7946",u=a(387),b=a(379),m=a(1);function x(e){var t,a=e.handleSearchOnClick,c=e.handleCityChange,r=e.handleCountryChange,s=e.handleUnitOnChange,o=e.openWeather,l=e.showAlert,d=e.unit,j=Object(n.useState)(""),h=Object(i.a)(j,2),x=h[0],f=h[1],O=Object(n.useState)(""),p=Object(i.a)(O,2),y=p[0],g=p[1];return t=o||l?"Hide":"Show me the weather",Object(n.useEffect)((function(){var e=setTimeout((function(){c(x),r(y)}),850);return function(){clearTimeout(e)}}),[x,y,c,r]),Object(m.jsxs)(u.a,{className:"container align-items-center \r justify-content-center p-2 col-xs-12 col-md-7 col-lg-5",onSubmit:function(e){e.preventDefault()},children:[Object(m.jsxs)(u.a.Group,{className:"mb-2",children:[Object(m.jsx)(u.a.Label,{"aria-required":!0,children:"Enter your city name:"}),Object(m.jsx)(u.a.Control,{type:"text",placeholder:"City...",onChange:function(e){return f(e.target.value)},autoFocus:!0,required:!0})]}),Object(m.jsxs)(u.a.Group,{children:[Object(m.jsx)(u.a.Label,{"aria-required":!0,children:"Enter your country code (optional):"}),Object(m.jsx)(u.a.Control,{type:"text",placeholder:"Country code...",onChange:function(e){return g(e.target.value)}}),Object(m.jsxs)("small",{className:"form-text text-muted",children:["For a more precise result, please specify the country code. Refer to this"," ",Object(m.jsx)("a",{href:"https://www.iso.org/obp/ui/#home",target:"_blank",rel:"noreferrer",children:"link"}),"\xa0for the country codes."]})]}),Object(m.jsx)("div",{className:"mt-2",children:Object(m.jsxs)(u.a.Group,{className:"d-flex justify-content-center",children:[Object(m.jsx)(u.a.Check,{name:"unitRadio",inline:!0,label:"Metric",type:"radio",onChange:s,value:"metric",checked:"metric"===d}),Object(m.jsx)(u.a.Check,{inline:!0,label:"Imperial",name:"unitRadio",onChange:s,type:"radio",value:"imperial",checked:"imperial"===d})]})}),Object(m.jsx)("div",{className:"d-flex justify-content-center",children:Object(m.jsx)(b.a,{style:{marginTop:10},onClick:a,"aria-expanded":"false","aria-controls":"weather alert",type:"submit",children:t})})]})}var f=a(385),O=a(388),p=(a(115),a(107)),y=a(22),g=a(61),w=a.n(g);function v(e){var t=e.data,a=e.unit;if(t&&0===Object.keys(t).length&&t.constructor===Object)return null;var n=t.weather[0],c=t.main,r=t.sys,s=t.name,i=t.wind,o=t.timezone,l=t.sys.sunrise+o,d=t.sys.sunset+o,j="http://openweathermap.org/img/wn/".concat(n.icon,".png"),h="metric"===a?"C":"F",u="metric"===a?"m/s (meter/sec)":"mph (miles per hour)",b=((new Date).getTime()+1e3*o)/1e3,x=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{className:"lead mb-0 text-center",style:{fontSize:"2vh"},children:["This is the current weather of ",s,", ",r.country," as of\xa0",Object(m.jsx)(w.a,{unix:!0,format:"LLL",tz:"UTC",children:b})," ","(local time):"]}),Object(m.jsxs)("div",{className:"d-flex flex-row align-items-center \r justify-content-center",children:[Object(m.jsx)("img",{src:j,alt:"weather condition"}),Object(m.jsxs)("p",{className:"h2 mb-0",children:[Math.round(c.temp),"\xb0",h," -"," ",x(n.description)]})]}),Object(m.jsxs)("p",{className:"text-center fs-5",children:[x(n.description)," condition is forecasted for now."]}),Object(m.jsxs)("div",{className:"card d-flex justify-content-center",children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsx)("span",{className:"lead",children:"Detailed weather report:"})}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{id:"weatherInfo",children:[Object(m.jsx)("span",{className:"text-muted",children:"High: "}),Object(m.jsxs)("span",{children:[Math.round(c.temp_max),"\xb0",h,"."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Low: "}),Object(m.jsxs)("span",{children:[Math.round(c.temp_min),"\xb0",h,"."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Feels like: "}),Object(m.jsxs)("span",{children:[Math.round(c.feels_like),"\xb0",h,"."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Humidity: "}),Object(m.jsxs)("span",{children:[Math.round(c.humidity),"%."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Atmospheric pressure: "}),Object(m.jsxs)("span",{children:[Math.round(c.pressure)," hPa."]}),Object(m.jsx)("hr",{}),Object(m.jsx)("span",{className:"text-muted",children:"Wind speed: "}),Object(m.jsxs)("span",{children:[i.speed," ",u,"."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Wind gust: "}),Object(m.jsxs)("span",{children:[i.gust," ",u,"."]}),Object(m.jsx)("hr",{}),Object(m.jsx)("span",{className:"text-muted",children:"Cloudiness: "}),Object(m.jsxs)("span",{children:[t.clouds.all,"%."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Visibility: "}),Object(m.jsxs)("span",{children:[t.visibility/1e3," km."]}),Object(m.jsx)("hr",{}),Object(m.jsx)("span",{className:"text-muted",children:"Sunrise: "}),Object(m.jsxs)("span",{children:[Object(m.jsx)(w.a,{unix:!0,format:"LT",tz:"UTC",children:l}),"."]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-muted",children:"Sunset: "}),Object(m.jsxs)("span",{children:[Object(m.jsx)(w.a,{unix:!0,format:"LT",tz:"UTC",children:d}),"."]})]})})]})]})}var N=a(41),C=a.n(N),S=a(380),k=a(381),M=a(205),T=a(197),q=a(198),Y=a(58),E=a(86),P=a(182),D=a.n(P);function L(e){var t=e.data,a=e.unit;if(t&&0===Object.keys(t).length&&t.constructor===Object)return null;for(var n=t.list,c=t.city.name,r=t.city.country,s=t.city.timezone,i=((new Date).getTime()+1e3*s)/1e3,o="metric"===a?"C":"F",l=[],d=0;d<8;d++){var j=n[d],h=j.dt;C.a.unix(h+s).utc().format("YYYY-MM-DD")!==C.a.unix(i).utc().format("YYYY-MM-DD")&&C.a.unix(h+s).utc().format("YYYY-MM-DD")!==C.a.unix(i+86400).utc().format("YYYY-MM-DD")||l.push(j)}for(var u=[],b=0,x=l;b<x.length;b++){var f=x[b],O={temp:f.main.temp,feels_like:f.main.feels_like,time:C.a.unix(f.dt+s).utc().format("HH:mm")};u.push(O)}var p=D.a.groupBy(n,(function(e){return C.a.unix(e.dt+s).utc().format("ddd")})),y=Object.keys(p);y.shift();var g=[];return y.forEach((function(e,t){var a=Number.MIN_VALUE,n=Number.MAX_VALUE;p[e].forEach((function(e,t){a=Math.max(e.main.temp_max,a),n=Math.min(e.main.temp_min,n)})),a=Math.round(a),n=Math.round(n);var c={date:e,high:a,low:n};g.push(c)})),Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{className:"lead mb-0 text-center mb-3",style:{fontSize:"2vh"},children:["This is the forecast of ",c,", ",r," as of\xa0",Object(m.jsx)(w.a,{unix:!0,format:"LLL",tz:"UTC",children:i})," ","(local time):"]}),Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header lead",children:"3-hour forecast:"}),Object(m.jsxs)("div",{className:"card-body d-flex flex-column overflow-auto ",children:[Object(m.jsx)(S.a,{width:"98%",height:300,children:Object(m.jsxs)(k.a,{data:u,children:[Object(m.jsx)(M.a,{type:"monotone",dataKey:"temp",stroke:"#8884d8",name:"Temperature",des:!0}),Object(m.jsx)(T.a,{dataKey:"time"}),Object(m.jsx)(q.a,{width:40,label:function(){return Object(m.jsx)(Y.a,{x:-35,y:30,dx:50,dy:150,offset:0,angle:-90,children:"Temperature"})}}),Object(m.jsx)(E.a,{})]})}),l.map((function(e){return Object(m.jsxs)("div",{className:"d-flex flex-row\r align-items-center",children:[Object(m.jsxs)("p",{className:"h5 mb-0",children:[Object(m.jsx)(w.a,{unix:!0,format:"HH:mm",tz:"UTC",children:e.dt+s}),":"]}),Object(m.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,".png"),alt:"weather condition"}),Object(m.jsxs)("p",{className:"fw-light fs-5 mb-0",children:[Math.round(e.main.temp),"\xb0",o," -"," ",(t=e.weather[0].description,t.charAt(0).toUpperCase()+t.slice(1)),". Feels like: ",Math.round(e.main.feels_like),"\xb0",o,"."]})]},e.dt_txt);var t}))]})]}),Object(m.jsxs)("div",{className:"card mt-3",children:[Object(m.jsx)("div",{className:"card-header lead",children:"Next 5 days forecast:"}),Object(m.jsx)("div",{className:"card-body d-flex flex-column overflow-auto ",children:Object(m.jsx)(S.a,{width:"98%",height:300,children:Object(m.jsxs)(k.a,{data:g,children:[Object(m.jsx)(M.a,{type:"monotone",dataKey:"high",stroke:"#8884d8",name:"Expected high temperature",des:!0}),Object(m.jsx)(T.a,{dataKey:"date"}),Object(m.jsx)(q.a,{width:40,label:function(){return Object(m.jsx)(Y.a,{x:-35,y:30,dx:50,dy:150,offset:0,angle:-90,children:"Temperature"})}}),Object(m.jsx)(E.a,{})]})})}),g.map((function(e){return Object(m.jsxs)("div",{className:"d-flex flex-row\r align-items-center justify-content-center mx-2",children:[Object(m.jsxs)("p",{className:"h5 mb-0",children:[e.date,":\xa0"]}),Object(m.jsxs)("span",{className:"fw-light mb-0 fs-5",children:["High:\xa0",Math.round(e.high),"\xb0",o," - Low:\xa0",Math.round(e.low),"\xb0",o,"."]})]},e.date)}))]})]})}function A(e){var t=e.weather,a=e.unit,c=e.handleRefresh,r=e.handleChangeReport,s=e.forecast,o=Object(n.useState)(0),l=Object(i.a)(o,2),d=l[0],j=l[1],h=Object(n.useState)(),u=Object(i.a)(h,2),x=u[0],g=u[1],w=Object(n.useState)(),N=Object(i.a)(w,2),C=N[0],S=N[1];return Object(n.useEffect)((function(){0===d?(g("text-light text-center col"),S("text-dark text-center col")):(g("text-dark text-center col"),S("text-light text-center col"))}),[d]),t&&0===Object.keys(t).length&&t.constructor===Object?null:Object(m.jsxs)(f.a,{fluid:!0,className:"justify-content-center border bg-light",children:[Object(m.jsxs)(p.a,{children:[Object(m.jsxs)("ul",{className:"row p-0",children:[Object(m.jsx)(O.a.Item,{as:p.b,className:x,to:"/currentweather",active:0===d,onClick:function(e){j(0),r("current")},children:"Current weather"}),Object(m.jsx)(O.a.Item,{as:p.b,className:C,to:"/fivedaysweather",active:0!==d,onClick:function(){j(1),r("five days")},children:"3-hour/5-day Forecast"})]}),Object(m.jsxs)(y.d,{children:[Object(m.jsx)(y.b,{path:"/currentweather",children:Object(m.jsx)(v,{data:t,unit:a,handleRefresh:c})}),Object(m.jsx)(y.b,{path:"/fivedaysweather",children:Object(m.jsx)(L,{data:s,unit:a,handleRefresh:c})})]}),Object(m.jsx)(y.a,{exact:!0,from:"/",to:"/currentweather"})]}),Object(m.jsx)("div",{className:"d-flex flex-row align-items-center \r justify-content-center",children:Object(m.jsx)(b.a,{style:{marginTop:10},className:"mb-2",onClick:c,children:"Refresh"})})]})}var R=a(386);function _(e){var t=e.showAlert,a=e.handleClose,n=e.error;return t?Object(m.jsxs)(R.a,{variant:"danger",children:[Object(m.jsx)(R.a.Heading,{children:"Error!"}),Object(m.jsx)("p",{children:n}),Object(m.jsx)("hr",{}),Object(m.jsx)("div",{className:"d-flex justify-content-end",children:Object(m.jsx)(b.a,{onClick:a,variant:"outline-success",children:"Close"})})]}):null}var H=function(){var e,t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(""),d=Object(i.a)(s,2),u=d[0],b=d[1],f=Object(n.useState)({}),O=Object(i.a)(f,2),p=O[0],y=O[1],g=Object(n.useState)({}),w=Object(i.a)(g,2),v=w[0],N=w[1],C=Object(n.useState)((new Date).getHours()),S=Object(i.a)(C,2),k=S[0],M=S[1],T=Object(n.useState)(!1),q=Object(i.a)(T,2),Y=q[0],E=q[1],P=Object(n.useState)(!1),D=Object(i.a)(P,2),L=D[0],R=D[1],H=Object(n.useState)(""),U=Object(i.a)(H,2),z=U[0],F=U[1],W=Object(n.useState)("metric"),I=Object(i.a)(W,2),G=I[0],K=I[1],V=Object(n.useState)(!1),B=Object(i.a)(V,2),J=B[0],X=B[1],Q=Object(n.useState)("current"),Z=Object(i.a)(Q,2),$=Z[0],ee=Z[1];return Object(n.useEffect)((function(){M((new Date).getHours())}),[k]),Object(n.useEffect)((function(){return(""!==c||J)&&("current"===$?""===u?function(e,t){return j.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&units=").concat(t,"&appid=").concat(h))}(c,G).then((function(e){console.log("calling the current weather api with only city"),y(e.data),F("")})).catch((function(e){e.response?"404"===e.response.data.cod?F("Please enter a valid city/country!"):"429"===e.response.data.cod&&F("Sorry! The number of calls exceeded the server's allowance. Please try again in a few minutes..."):e.request&&F("Sorry! We are not receiving any request from the server. Please try again in a few minutes...")})):function(e,t,a){return j.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,",").concat(t,"&units=").concat(a,"&appid=").concat(h))}(c,u,G).then((function(e){console.log("calling the current weather api with city and country"),y(e.data),F("")})).catch((function(e){e.response?"404"===e.response.data.cod?F("Please enter a valid city/country!"):"429"===e.response.data.cod&&F("Sorry! The number of calls exceeded the server's allowance. Please try again in a few minutes..."):e.request?console.log(e.request):e.request&&F("Sorry! We are not receiving any request from the server. Please try again in a few minutes...")})):"five days"===$&&(""===u?function(e,t){return j.a.get("https://api.openweathermap.org/data/2.5/forecast?q=".concat(e,"&units=").concat(t,"&appid=").concat(h))}(c,G).then((function(e){console.log("calling the FORECAST api with only city"),N(e.data),F("")})).catch((function(e){e.response?"404"===e.response.data.cod?F("Please enter a valid city/country!"):"429"===e.response.data.cod&&F("Sorry! The number of calls exceeded the server's allowance. Please try again in a few minutes..."):e.request&&F("Sorry! We are not receiving any request from the server. Please try again in a few minutes...")})):function(e,t,a){return j.a.get("https://api.openweathermap.org/data/2.5/forecast?q=".concat(e,",").concat(t,"&units=").concat(a,"&appid=").concat(h))}(c,u,G).then((function(e){console.log("calling the FORECAST weather api with city and country"),N(e.data),F("")})).catch((function(e){e.response?"404"===e.response.data.cod?F("Please enter a valid city/country!"):"429"===e.response.data.cod&&F("Sorry! The number of calls exceeded the server's allowance. Please try again in a few minutes..."):e.request?console.log(e.request):e.request&&F("Sorry! We are not receiving any request from the server. Please try again in a few minutes...")})))),function(){return X(!1)}}),[c,u,G,J,$]),Object(n.useEffect)((function(){""!==z?(R(!0),E(!1)):(R(!1),""!==c&&E(!0))}),[z,c]),j.a.interceptors.response.use((function(e){return e}),(function(e){if("401"!==e.response.status)return Promise.reject(e);F("Sorry! API key error. Please try again later.")})),e=k<12&&k>4?"morning":k<18&&k>12?"afternoon":"evening",Object(m.jsxs)("div",{className:"d-flex justify-content-center align-items-center\r flex-column h-100",children:[Object(m.jsxs)("p",{className:"display-5 text-center",children:["Good ",e,"! Welcome to my weather app."]}),Object(m.jsx)(x,{handleSearchOnClick:function(){""===z&&""!==c?(R(!1),E(!Y)):(""===c&&F("You must enter a city first!"),R(!L))},handleCityChange:function(e){r(e)},handleCountryChange:function(e){b(e)},handleUnitOnChange:function(e){K(e.target.value)},openWeather:Y,showAlert:L,unit:G}),Object(m.jsx)(o.a,{in:L,children:Object(m.jsx)("div",{id:"alert",children:Object(m.jsx)(_,{showAlert:L,handleClose:function(){R(!L)},error:z})})}),Object(m.jsx)(l.a,{in:Y,children:Object(m.jsx)("div",{id:"weather",className:"overflow-auto",children:Object(m.jsx)(A,{weather:p,unit:G,forecast:v,handleRefresh:function(){X(!0)},handleChangeReport:function(e){ee(e)}})})})]})};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(H,{})}),document.getElementById("root"))}},[[376,1,2]]]);
//# sourceMappingURL=main.49830884.chunk.js.map